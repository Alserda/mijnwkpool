<div class="grid-r">
  <div class="medium-4-4">
    <div class="box">
      <form accept-charset="UTF-8" action="/app/games" class="new_game" enctype="multipart/form-data" id="new_game" method="post">
        <div class="content-header">
          <h1>Punten SCRIPT</h1>
        </div>
        <div class="pooldashboard-content">
          <table id="myTable" class="table admin"> 
            <thead>
              <tr>
                <th>Points</th>              
                <th>Datum</th>
                <th>Tijd</th>
                <th>Team 1</th>
                <th>Score</th>
                <th>Team 2</th>
              </tr>
            </thead>
            
            <tbody>
              <!-- GAME INFORMATION --> 
              <% @games.each do |game| %>
                <% if game.score1 == nil && game.score2 == nil %>
                  <tr>
                    <td style="width: 50px; padding: 3px;"></td>                  
                    <td style="width: 90px; padding: 3px;"><%= game.date %></td>
                    <td style="width: 30px; padding: 3px;"><%= game.time.strftime("%I:%M") %></td>
                    <td><%= Team.find(game.team1_id).name %></td>
                    <td> x - x </td>
                    <td><%= Team.find(game.team2_id).name %></td>        
                  </tr>
                <% else %>
                  <tr>
                    <td style="width: 50px; padding: 3px;"></td>                  
                    <td style="width: 90px; padding: 3px;"><%= game.date %></td>
                    <td style="width: 30px; padding: 3px;"><%= game.time.strftime("%I:%M") %></td>
                    <td><%= Team.find(game.team1_id).name %></td>
                    <td><%= game.score1 %> - <%= game.score2 %></td>
                    <td><%= Team.find(game.team2_id).name %></td>        
                  </tr>                                                                   
                <% end %>

                <!-- PREDICTIONS INFORMATION --> 
                <% @predictions.each do |prediction| %>
                  <% if game.id == prediction.game_id %>
                    <% if game.score1 == nil && game.score2 == nil %>
                    <% else %>
                      <!-- POINTS voor 0-1, totaal uitslag goed --> 
                      <% if game.score1 < game.score2 && prediction.prediction1 < prediction.prediction2 %>
                        <% if game.score1 == prediction.prediction1 && game.score2 == prediction.prediction2 %><br/>
                          +12 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %> 
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 12%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 12%>
                            <% prediction.save %>
                          <% end %>
                        <!-- POINTS voor 0-1, getal 2 goed --> 
                        <% elsif game.score2 == prediction.prediction2 %><br/>
                          +7 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %> 
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 7%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 7%>
                            <% prediction.save %>
                          <% end %>
                        <!-- POINTS voor 0-1, toto goed --> 
                        <% else %><br/>
                          +5 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %> 
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 5%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 5%>
                            <% prediction.save %>
                          <% end %>
                        <% end %>

                      <!-- POINTS voor 1-0, totaal uitslag goed --> 
                      <% elsif game.score1 > game.score2 && prediction.prediction1 > prediction.prediction2 %>
                        <% if game.score1 == prediction.prediction1 && game.score2 == prediction.prediction2 %><br/>
                          +12 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %> 
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 12%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 12%>
                            <% prediction.save %>
                          <% end %>
                        <!-- POINTS voor 1-0, getal 1 goed --> 
                        <% elsif game.score2 == prediction.prediction2 %><br/>
                          +7 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %>
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 7%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 7%>
                            <% prediction.save %>
                          <% end %>
                        <!-- POINTS voor 1-0, toto goed --> 
                        <% else %><br/>
                          +5 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %> 
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 5%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 5%>
                            <% prediction.save %>
                          <% end %>
                        <% end %>

                      <!-- POINTS voor 1-1, totaal uitslag goed --> 
                      <% elsif game.score1 == game.score2 && prediction.prediction1 == prediction.prediction2 %>
                        <% if game.score1 == prediction.prediction1 && game.score2 == prediction.prediction2 %><br/>
                          +12 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %> 
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>  
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 12%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 12%>
                            <% prediction.save %>
                          <% end %>
                        
                        <!-- POINTS voor 1-1, toto goed -->                     
                        <%else%><br/>
                          +5 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %>
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 5%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 5%>
                            <% prediction.save %>
                          <% end %>
                        <% end %>
                        
                      <% else %>  
                        <!-- POINTS voor 0-1, getal 1 goed -->                                       
                        <% if game.score1 == prediction.prediction1 %><br/>
                          +2 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %> 
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 2%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 2%>
                            <% prediction.save %>
                          <% end %>

                        <!-- POINTS voor 1-0, getal 2 goed -->                     
                        <% elsif game.score2 == prediction.prediction2 %><br/>
                          +2 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %> 
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                          
                          <% if prediction.pointsgiven == 1 %>
                            || Punten toegekend
                          <% else %>
                            <% scoreupdate = Poolmembership.find(prediction.poolmembership_id) %>
                            <% myes = scoreupdate.score + 2%>
                            <% score5 = scoreupdate %>
                            <% score5.score = myes %>
                            <% score5.save %>
                            <% prediction.pointsgiven = 1 %>
                            <% prediction.pointsearned = 2%>
                            <% prediction.save %>
                          <% end %>

                        <!-- POINTS niks goed -->                     
                        <% else %><br/>
                          +0 || <%= prediction.prediction1 %> - <%= prediction.prediction2 %> 
                          || Game ID: <%= game.id %> 
                          || Poolmembership ID: <%= prediction.poolmembership_id %>
                        <% end %>
                      <% end %>
                    <% end %>
                  <% else %> 
                    <!-- if game.id == prediction.game_id -->
                  <% end %>
                <% end %>
              <% end %>
            </tbody>
          </table>
        <strong>Score:</strong><br/>
        <% Poolmembership.all.each do |myes| %>
          <br/>
          <%= myes.id %> - 
          <%= User.find(myes.user_id).nickname%> in 
          <%= Pool.find(myes.pool_id).name %> - 
          <%= myes.score %>
        <% end %>
        </div>
      </form>
    </div>
  </div>
</div>                        