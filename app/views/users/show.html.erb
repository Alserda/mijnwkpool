<% title @user.nickname %>


<div class="medium-3-4">
  <div class="box">
    <div class="content-header">
      <h1>Profiel van <%= @user.name %></h1>
    </div>
    <div class="pool-list">
      <ul>
        <li>
          <p>Naam:</p>
          <h3><%= @user.name %></h3>
        </li>
        <li>
          <p>Nickname:</p>
          <h3><%= @user.nickname %></h3>
        </li>
      </ul>
    </div>


    <div class="pooldashboard-content">
      <% @poolmemberships.each do |poolmembership| %>
        <h2><%= Pool.find(poolmembership.pool_id).name %></h2>
        <table id="myTable" class="table poule">
          <thead>
            <tr>
            <th>Datum</th>
            <th>Poule</th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th>Punten</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <% @games.each_with_index do |game, index| %>
                <% prediction = Prediction.find_by_poolmembership_id_and_game_id(poolmembership.id, game.id) %>
                <td class="infoshower">
                  <i class="fa fa-question-circle"></i>
                  <div class="infobox hiddeninfo"><%= Team.find(game.team1_id).name %> - <%= Team.find(game.team2_id).name %> <br /> <span><%= game.date.strftime('%C %B') %>, <%= game.time.strftime('%H:%M') %></span></div>
                </td>
                <td>
                  <%= Team.find(game.team1_id).poule %>
                </td>
                <td class="default-hide small-show">
                  <%= Team.find(game.team1_id).name %>
                </td>
                <td class="flag">
                  <%= image_tag Team.find(game.team1_id).avatar.url(:mini) %>
                </td>
                <td class="predict-score">
                  <div class="view-table">
                    <div class="view-row">
                      <div class='predict'>
                        <% if prediction.present? %>
                          <%= Prediction.find(prediction.id).prediction1 %>
                        <% else %>
                          x
                        <% end %>
                      </div>
                      <div>
                        &ndash;
                      </div>
                      <div class='predict'>
                        <% if prediction.present? %>
                          <%= Prediction.find(prediction.id).prediction2 %>
                        <% else %>
                          x
                        <% end %>
                      </div>
                    </div>
                  </div>
                </td>

                <td class="flag">
                  <%= image_tag Team.find(game.team2_id).avatar.url(:mini) %>
                </td>
                <td>
                  <%= Team.find(game.team2_id).name %>
                </td>
                <td>
                  <% if game.score1 == nil && game.score2 == nil %>
                    
                  <% else %>
                    <%= game.score1 %> - <%= game.score2 %>
                  <% end %>
                </td>
                <td>
                <% if prediction.present? && !(game.score1 == nil && game.score2 == nil) %>
                  <%= prediction.pointsearned %>
                <% else %>
                  x
                <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <br/>
      <% end %>
    </div>
  </div>
</div>
<div class='default-0 medium-1-4'>
<%= render "shared/aside" %>
</div>

<script type="text/javascript">
var display = false;

$(".infoshower").hover(function () {
$(this).find(".hiddeninfo").fadeIn('fast')
}, function () {
$(this).find(".hiddeninfo").fadeOut('fast')
});
var display = false;
</script>